<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio OS Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- WINDOWS XP CURSOR & GLOBAL STYLES --- */
        * { 
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="white" stroke="black" stroke-width="2"/><circle cx="10" cy="10" r="2" fill="black"/></svg>') 16 16, auto;
            box-sizing: border-box; 
            user-select: none;
            margin: 0;
            padding: 0;
        }
        
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url('content/wallpaper.png') no-repeat center center fixed;
            background-size: cover;
            background-color: #0078d7;
            position: relative;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- WINDOWS 10 BLUE THEME --- */
        :root {
            --primary-color: #0078d7;
            --primary-light: #50a6ff;
            --primary-dark: #005a9e;
            --taskbar-height: 48px;
            --bg-glass: rgba(255, 255, 255, 0.25);
            --window-bg: #f0f0f0;
            --accent: #0078d7;
            --accent-hover: #106ebe;
            --text-dark: #1a1a1a;
            --text-light: #f0f0f0;
            --shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
            --shadow-small: 0 4px 12px rgba(0, 0, 0, 0.15);
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 8px;
            --taskbar-blur: blur(30px);
        }

        /* --- ENHANCED ANIMATIONS --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(0, 120, 215, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 120, 215, 0.8); }
            100% { box-shadow: 0 0 5px rgba(0, 120, 215, 0.5); }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.95); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- SHUTDOWN SCREEN --- */
        #shutdown-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #001f3f 0%, #003366 50%, #001a33 100%);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 20000;
            flex-direction: column;
            color: white;
        }

        .shutdown-logo {
            font-size: 120px;
            margin-bottom: 40px;
            animation: pulse 2s infinite;
            color: var(--primary-light);
        }

        .shutdown-text {
            font-size: 32px;
            margin-bottom: 20px;
            text-align: center;
            animation: fadeIn 2s ease-in-out infinite alternate;
        }

        .shutdown-subtext {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            max-width: 400px;
            line-height: 1.5;
        }

        .shutdown-progress {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            margin-top: 40px;
            border-radius: 2px;
            overflow: hidden;
        }

        .shutdown-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            transition: width 3s ease-in-out;
        }

        /* --- DESKTOP ICONS --- */
        .desktop-container {
            width: 100%;
            height: calc(100% - var(--taskbar-height));
            position: relative;
            padding: 20px;
            display: block;
        }

        .icon-column-left {
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: absolute;
            top: 20px;
            left: 20px;
        }

        .icon-corner-right {
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: absolute;
            bottom: 20px;
            right: 20px;
            align-items: flex-end;
        }

        .app-icon {
            width: 90px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            padding: 12px 8px;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            background: var(--bg-glass);
            border: 1px solid rgba(255,255,255,0.2);
            animation: fadeIn 0.5s ease;
            animation-fill-mode: both;
        }

        .app-icon:nth-child(1) { animation-delay: 0.1s; }
        .app-icon:nth-child(2) { animation-delay: 0.2s; }
        .app-icon:nth-child(3) { animation-delay: 0.3s; }
        .app-icon:nth-child(4) { animation-delay: 0.4s; }
        .app-icon:nth-child(5) { animation-delay: 0.5s; }

        .app-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: var(--transition);
        }

        .app-icon:hover::before {
            opacity: 1;
        }

        .app-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.7s ease;
        }

        .app-icon:hover::after {
            left: 100%;
        }

        .app-icon.dragging {
            opacity: 0.8;
            transform: scale(1.1);
            z-index: 9999;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        }

        .app-icon:hover { 
            transform: translateY(-8px) scale(1.05); 
            background: rgba(255,255,255,0.3);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.4);
        }

        .app-icon i { 
            font-size: 36px; 
            margin-bottom: 8px;
            filter: drop-shadow(0 3px 5px rgba(0,0,0,0.3));
            transition: var(--transition);
        }

        .app-icon:hover i {
            transform: scale(1.2) rotate(5deg);
        }

        .app-icon span { 
            font-size: 13px; 
            font-weight: 600;
            z-index: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            padding: 2px 5px;
            border-radius: 4px;
            background: rgba(0,0,0,0.3);
            transition: var(--transition);
        }

        .app-icon:hover span {
            background: rgba(0,0,0,0.5);
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 13px;
            white-space: nowrap;
            z-index: 10000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            transform: translateY(10px);
            top: -45px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: rgba(0,0,0,0.9) transparent transparent transparent;
        }

        .app-icon:hover .tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Boje ikonica */
        .c-discord { color: #5865F2; }
        .c-github { color: #f0f6fc; }
        .c-folder { color: #FFD43B; }
        .c-user { color: #63E6BE; }
        .c-social { color: #FF70A6; }
        .c-paint { color: #FF6B6B; }
        .c-notepad { color: #4ECDC4; }
        .c-browser { color: #4285F4; }

        /* --- WINDOW STYLES --- */
        .window {
            position: absolute;
            background: var(--window-bg);
            border: 1px solid #ccc;
            border-radius: 12px;
            box-shadow: var(--shadow);
            display: none;
            flex-direction: column;
            min-width: 350px;
            min-height: 250px;
            resize: both;
            overflow: hidden;
            animation: bounceIn 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .window.maximized {
            width: 100% !important;
            height: calc(100% - var(--taskbar-height)) !important;
            top: 0 !important;
            left: 0 !important;
            border-radius: 0;
            resize: none;
        }

        .title-bar {
            background: linear-gradient(to right, #0078d7, #106ebe);
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            font-weight: 600;
            color: white;
            user-select: none;
            font-size: 15px;
        }

        .window-content {
            flex: 1;
            overflow: auto;
            background: white;
            color: black;
            user-select: text;
            padding: 0;
        }

        .window-controls {
            display: flex;
            gap: 8px;
        }

        .window-controls span {
            display: inline-block;
            width: 30px;
            height: 30px;
            text-align: center;
            line-height: 30px;
            cursor: pointer;
            border-radius: 6px;
            transition: var(--transition);
            font-weight: bold;
            color: white;
            background: rgba(255,255,255,0.2);
        }
        
        .close-btn:hover { 
            background: #e81123; 
            transform: rotate(90deg);
        }
        
        .min-btn:hover { 
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .max-btn:hover { 
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .logout-btn:hover { 
            background: rgba(255,255,255,0.3);
            transform: rotate(180deg);
        }

        /* --- ABOUT ME WINDOW (Load o-meni.html file) --- */
        .about-content {
            height: 100%;
            overflow: auto;
            padding: 20px;
            background: white;
        }

        .about-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .about-loading i {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--accent);
            animation: spin 2s linear infinite;
        }

        .about-error {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .about-error i {
            font-size: 48px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        .about-error h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #333;
        }

        .about-error p {
            font-size: 16px;
            color: #666;
            max-width: 400px;
            line-height: 1.5;
        }

        /* --- REALISTIC BROWSER --- */
        .browser-ui {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: #fff;
        }

        .browser-tabs {
            display: flex;
            background: #f1f1f1;
            border-bottom: 1px solid #ccc;
            padding: 5px 5px 0 5px;
            gap: 2px;
            overflow-x: auto;
        }

        .browser-tab {
            padding: 10px 20px;
            background: #e8e8e8;
            border: 1px solid #ccc;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 14px;
            max-width: 200px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            transition: var(--transition);
            position: relative;
            flex-shrink: 0;
        }

        .browser-tab.active {
            background: white;
            font-weight: 600;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
            border-color: var(--accent);
            border-bottom: 2px solid var(--accent);
        }

        .browser-tab:hover {
            background: #f0f0f0;
        }

        .browser-tab .close-tab {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            opacity: 0;
            transition: var(--transition);
        }

        .browser-tab:hover .close-tab {
            opacity: 1;
        }

        .browser-tab .close-tab:hover {
            background: #ff5f57;
            color: white;
        }

        .browser-navbar {
            display: flex;
            gap: 10px;
            padding: 12px;
            background: #f8f8f8;
            border-bottom: 1px solid #ddd;
            align-items: center;
            flex-wrap: wrap;
        }

        .browser-nav-btn {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            border: 1px solid #ccc;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .browser-nav-btn:hover {
            background: #f0f0f0;
            border-color: #aaa;
            transform: translateY(-2px);
        }

        .browser-address-bar {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 25px;
            font-size: 15px;
            background: white;
            outline: none;
            transition: var(--transition);
            min-width: 200px;
        }

        .browser-address-bar:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 120, 215, 0.2);
        }

        .bookmarks-bar {
            padding: 8px 12px;
            background: #f8f8f8;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 20px;
            font-size: 13px;
            overflow-x: auto;
        }

        .bookmark {
            color: #444;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: var(--transition);
            white-space: nowrap;
            flex-shrink: 0;
        }

        .bookmark:hover {
            background: rgba(0,0,0,0.05);
            color: var(--accent);
            transform: translateY(-2px);
        }

        .browser-content {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .browser-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .browser-new-tab {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 16px;
            color: #666;
            background: #fafafa;
            flex-direction: column;
            gap: 20px;
        }

        /* --- ADVANCED PAINT --- */
        .paint-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .paint-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px;
            background: #f8f8f8;
            border-bottom: 1px solid #ccc;
            align-items: center;
        }

        .paint-tool {
            width: 40px;
            height: 40px;
            border: 1px solid #ccc;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .paint-tool:hover, .paint-tool.active {
            background: #e8f4ff;
            border-color: var(--accent);
            transform: translateY(-3px);
        }

        .paint-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin: 0 15px;
            padding: 6px;
            background: white;
            border-radius: 6px;
            border: 1px solid #ddd;
        }

        .paint-color {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .paint-color:hover, .paint-color.active {
            transform: scale(1.3);
            border-color: rgba(0,0,0,0.3);
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        .paint-main {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .paint-canvas-container {
            flex: 1;
            overflow: auto;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: none;
        }

        #advanced-paint-canvas {
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: crosshair;
            touch-action: none;
        }

        .paint-status {
            padding: 8px 15px;
            background: #f0f0f0;
            border-top: 1px solid #ccc;
            font-size: 13px;
            color: #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* --- SOCIALS WINDOW --- */
        .socials-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 30px;
            background: linear-gradient(135deg, #f9f9f9, #f0f0f0);
        }

        .socials-title {
            font-size: 28px;
            margin-bottom: 30px;
            color: #333;
            text-align: center;
            font-weight: 700;
            background: linear-gradient(90deg, #0078d7, #00bcd4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .socials-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }

        .social-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            transition: var(--transition);
            border: 2px solid transparent;
            cursor: pointer;
            animation: fadeIn 0.5s ease;
            animation-fill-mode: both;
        }

        .social-card:nth-child(1) { animation-delay: 0.1s; }
        .social-card:nth-child(2) { animation-delay: 0.2s; }
        .social-card:nth-child(3) { animation-delay: 0.3s; }
        .social-card:nth-child(4) { animation-delay: 0.4s; }

        .social-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-color: var(--accent);
        }

        .social-icon {
            font-size: 48px;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .social-card:hover .social-icon {
            transform: scale(1.2) rotate(5deg);
        }

        .social-card.instagram .social-icon { color: #E1306C; }
        .social-card.email .social-icon { color: #4285F4; }
        .social-card.discord .social-icon { color: #5865F2; }
        .social-card.github .social-icon { color: #333; }

        .social-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .social-value {
            font-size: 15px;
            color: #666;
            word-break: break-all;
            margin-bottom: 20px;
        }

        .social-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            transition: var(--transition);
            display: inline-block;
            font-weight: 600;
        }

        .social-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 120, 215, 0.3);
        }

        /* --- DISCORD WINDOW --- */
        .discord-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 40px;
            background: linear-gradient(135deg, #36393f, #2f3136);
            color: white;
            text-align: center;
        }

        .discord-icon {
            font-size: 100px;
            color: #5865F2;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        .discord-title {
            font-size: 32px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .discord-subtitle {
            color: #b9bbbe;
            margin-bottom: 40px;
            font-size: 18px;
            max-width: 450px;
            line-height: 1.6;
        }

        .discord-invite-btn {
            padding: 18px 36px;
            background: linear-gradient(135deg, #5865F2, #4752c4);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 25px rgba(88, 101, 242, 0.4);
        }

        .discord-invite-btn:hover {
            background: linear-gradient(135deg, #4752c4, #3c45a5);
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(88, 101, 242, 0.5);
        }

        .discord-stats {
            display: flex;
            gap: 40px;
            margin-top: 40px;
            font-size: 16px;
            color: #b9bbbe;
        }

        /* --- PROJECTS WINDOW WITH ANIMATIONS --- */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            padding: 30px;
        }

        .project-card {
            background: linear-gradient(145deg, #ffffff, #f5f5f5);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: var(--transition-slow);
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
            min-height: 320px;
            animation: fadeIn 0.6s ease;
            animation-fill-mode: both;
        }

        .project-card:nth-child(1) { animation-delay: 0.1s; }
        .project-card:nth-child(2) { animation-delay: 0.2s; }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent), #00bcd4);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.6s ease;
        }

        .project-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .project-card:hover::before {
            transform: scaleX(1);
        }

        .project-card:nth-child(1):hover { border-color: #0078d7; }
        .project-card:nth-child(2):hover { border-color: #28a745; }

        .project-icon {
            font-size: 42px;
            margin-bottom: 25px;
            text-align: center;
            transition: var(--transition);
        }

        .project-card:hover .project-icon {
            transform: scale(1.3) rotate(10deg);
        }

        .project-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-dark);
            position: relative;
            display: inline-block;
        }

        .project-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--accent);
            transition: width 0.6s ease;
        }

        .project-card:hover .project-title::after {
            width: 100%;
        }

        .project-description {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.7;
            min-height: 90px;
        }

        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .tech-tag {
            background: rgba(0, 120, 215, 0.1);
            color: var(--accent);
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 600;
            transition: var(--transition);
        }

        .project-card:hover .tech-tag {
            background: var(--accent);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 120, 215, 0.3);
        }

        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 25px;
            color: var(--accent);
            text-decoration: none;
            font-weight: 700;
            font-size: 16px;
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.4s ease 0.1s;
        }

        .project-card:hover .project-link {
            opacity: 1;
            transform: translateY(0);
        }

        .project-link:hover {
            text-decoration: underline;
            transform: translateX(5px);
        }

        .project-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            font-size: 13px;
            color: #888;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .project-stat {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* --- CONTEXT MENU --- */
        .context-menu {
            position: absolute;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: var(--taskbar-blur);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            z-index: 10001;
            min-width: 180px;
            display: none;
            flex-direction: column;
            padding: 8px 0;
            animation: fadeIn 0.15s ease;
            border: 1px solid #ccc;
        }

        .context-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .context-item:hover {
            background: rgba(0, 120, 215, 0.1);
            color: var(--accent);
            padding-left: 25px;
        }

        .context-divider {
            height: 1px;
            background: #eee;
            margin: 8px 0;
        }

        /* --- START MENU --- */
        #start-menu {
            position: absolute;
            bottom: var(--taskbar-height);
            left: 0;
            width: 380px;
            height: 550px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: var(--taskbar-blur);
            border-radius: 0 16px 16px 0;
            display: none;
            flex-direction: column;
            z-index: 9998;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            animation: slideInLeft 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .start-profile { 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            padding: 25px; 
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            margin-bottom: 10px; 
            color: white;
        }
        
        .start-profile img { 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            border: 3px solid rgba(255,255,255,0.5);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .start-apps {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .start-item {
            padding: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 20px;
            border-radius: 10px;
            transition: var(--transition);
            color: #333;
        }
        
        .start-item:hover { 
            background: rgba(0, 120, 215, 0.1);
            transform: translateX(8px);
            color: var(--accent);
        }

        /* --- TASKBAR --- */
        #taskbar {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: var(--taskbar-height);
            background: rgba(0, 56, 120, 0.95);
            backdrop-filter: var(--taskbar-blur);
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 9999;
            border-top: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
        }

        .start-btn {
            height: 40px;
            width: 40px;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            margin-right: 20px;
            overflow: hidden;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }
        
        .start-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            animation: none;
        }
        
        .start-btn img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }

        .taskbar-apps { 
            display: flex; 
            gap: 10px; 
            height: 100%;
            align-items: center;
            flex: 1;
            overflow-x: auto;
            padding: 0 10px;
        }
        
        .taskbar-icon {
            width: 44px;
            height: 44px;
            color: white;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            flex-shrink: 0;
        }
        
        .taskbar-icon:hover { 
            background: rgba(255,255,255,0.2);
            transform: translateY(-3px);
        }
        
        .taskbar-icon.active {
            background: rgba(255,255,255,0.25);
            border-bottom: 3px solid white;
        }
        
        .taskbar-icon.active::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: white;
        }

        .clock-tray {
            margin-left: auto;
            color: white;
            font-size: 14px;
            text-align: center;
            padding: 8px 15px;
            border-radius: 8px;
            transition: var(--transition);
            flex-shrink: 0;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .clock-tray:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        /* --- RESPONSIVE MOBILE --- */
        @media (max-width: 768px) {
            :root {
                --taskbar-height: 60px;
            }
            
            .icon-column-left, .icon-corner-right { 
                position: static;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                margin: 10px;
                gap: 15px;
            }
            
            .app-icon {
                width: 100px;
                padding: 15px 10px;
            }
            
            .window {
                width: 100% !important;
                height: calc(100% - var(--taskbar-height)) !important;
                top: 0 !important;
                left: 0 !important;
                border-radius: 0;
                min-width: unset;
                min-height: unset;
                resize: none;
            }
            
            .title-bar {
                padding: 15px;
                font-size: 16px;
                touch-action: none;
            }
            
            #start-menu { 
                width: 100%; 
                height: 80vh;
                border-radius: 20px 20px 0 0;
                bottom: var(--taskbar-height);
            }
            
            .start-apps {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .start-item {
                padding: 12px;
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .start-item span {
                font-size: 12px;
            }
            
            .browser-tabs {
                padding: 5px;
            }
            
            .browser-tab {
                padding: 8px 15px;
                font-size: 13px;
                max-width: 150px;
            }
            
            .browser-navbar {
                padding: 10px;
                gap: 5px;
            }
            
            .browser-address-bar {
                min-width: unset;
                font-size: 14px;
                padding: 8px 12px;
            }
            
            .projects-grid {
                grid-template-columns: 1fr;
                padding: 20px;
                gap: 20px;
            }
            
            .project-card {
                padding: 25px;
                min-height: 280px;
            }
            
            .socials-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .taskbar {
                padding: 0 10px;
            }
            
            .start-btn {
                width: 45px;
                height: 45px;
                margin-right: 10px;
            }
            
            .taskbar-icon {
                width: 50px;
                height: 50px;
            }
            
            .clock-tray {
                padding: 6px 10px;
                font-size: 13px;
            }
            
            /* Double tap for right click on mobile */
            .app-icon {
                touch-action: manipulation;
            }
        }

        /* --- NOTIFICATION --- */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 10002;
            transform: translateX(100px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 300px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        /* --- BROWSER FIX FOR IFRAME --- */
        .browser-error {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 40px;
            text-align: center;
            background: #f8f8f8;
        }

        .browser-error i {
            font-size: 60px;
            color: #ff6b6b;
            margin-bottom: 20px;
        }

        .browser-error h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
        }

        .browser-error p {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            max-width: 400px;
        }

        /* --- NOTEPAD --- */
        .notepad-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .notepad-menu-bar {
            background: #f8f8f8;
            padding: 8px 15px;
            border-bottom: 1px solid #ddd;
            display: flex;
            gap: 15px;
        }

        .notepad-menu-item {
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 6px;
            transition: var(--transition);
        }

        .notepad-menu-item:hover {
            background: rgba(0, 120, 215, 0.1);
            color: var(--accent);
        }

        .notepad-content {
            flex: 1;
            overflow: auto;
        }

        .notepad-tab {
            width: 100%;
            height: 100%;
            border: none;
            padding: 20px;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            outline: none;
            display: none;
        }

        .notepad-tab.active {
            display: block;
        }

        .notepad-readonly {
            background: #f5f5f5;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- SHUTDOWN SCREEN -->
    <div id="shutdown-screen">
        <div class="shutdown-logo">
            <i class="fas fa-power-off"></i>
        </div>
        <div class="shutdown-text">Isključivanje sistema...</div>
        <div class="shutdown-subtext">Molimo sačekajte dok se sistem potpuno isključi.</div>
        <div class="shutdown-progress">
            <div class="shutdown-progress-bar" id="shutdown-progress"></div>
        </div>
    </div>

    <!-- DESKTOP -->
    <div class="desktop-container" id="desktop" oncontextmenu="showContextMenu(event, 'desktop'); return false;">
        
        <div class="icon-column-left">
            <div class="app-icon" id="icon-projects" draggable="true">
                <i class="fas fa-folder-open c-folder"></i>
                <span data-key="projects">Projekti</span>
                <div class="tooltip">Moji Projekti (Dupli Klik)</div>
            </div>
            <div class="app-icon" id="icon-about" draggable="true">
                <i class="fas fa-user-circle c-user"></i>
                <span data-key="about">O meni</span>
                <div class="tooltip">O meni - Učitava o-meni.html</div>
            </div>
            <div class="app-icon" id="icon-socials" draggable="true">
                <i class="fas fa-share-alt c-social"></i>
                <span data-key="socials">Društvene mreže</span>
                <div class="tooltip">Moji Linkovi</div>
            </div>
            <div class="app-icon" id="icon-browser" draggable="true">
                <i class="fab fa-chrome c-browser"></i>
                <span>Pretraživač</span>
                <div class="tooltip">Web Pretraživač</div>
            </div>
            <div class="app-icon" id="icon-paint" draggable="true">
                <i class="fas fa-paint-brush c-paint"></i>
                <span>Paint Pro</span>
                <div class="tooltip">Napredni Paint</div>
            </div>
        </div>

        <div class="icon-corner-right">
            <div class="app-icon" id="icon-discord" draggable="true">
                <i class="fab fa-discord c-discord"></i>
                <span>Discord</span>
                <div class="tooltip">Pridružite se serveru</div>
            </div>
            <div class="app-icon" id="icon-github" draggable="true">
                <i class="fab fa-github c-github"></i>
                <span>GitHub</span>
                <div class="tooltip">Moj GitHub Profil</div>
            </div>
            <div class="app-icon" id="icon-notepad" draggable="true">
                <i class="fas fa-file-alt c-notepad"></i>
                <span>Novi fajl</span>
                <div class="tooltip">Napravi novi fajl</div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu"></div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- PROJECTS WINDOW -->
    <div id="win-projects" class="window" style="top: 10%; left: 15%; width: 750px; height: 600px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-projects')" ontouchstart="startDragTouch(event, 'win-projects')">
            <span data-key="projects">Moji Projekti</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-projects')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-projects')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-projects')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div class="projects-grid">
                <div class="project-card">
                    <div class="project-icon" style="color: #0078d7;">
                        <i class="fas fa-desktop"></i>
                    </div>
                    <h3 class="project-title">Portfolio OS</h3>
                    <p class="project-description">Web-baziran operativni sistem izgrađen sa HTML5, CSS3 i vanilla JavaScript. Ima realističan menadžment prozora, aplikacije i taskbar sa punom funkcionalnošću.</p>
                    <div class="project-tech">
                        <span class="tech-tag">HTML5</span>
                        <span class="tech-tag">CSS3</span>
                        <span class="tech-tag">JavaScript</span>
                        <span class="tech-tag">Canvas API</span>
                        <span class="tech-tag">LocalStorage</span>
                    </div>
                    <a href="#" class="project-link" onclick="openWindow('browser')">
                        <i class="fas fa-external-link-alt"></i> Demo
                    </a>
                    <div class="project-stats">
                        <span class="project-stat"><i class="fas fa-code"></i> 3k linija</span>
                        <span class="project-stat"><i class="far fa-calendar"></i> Februar 2026</span>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-icon" style="color: #28a745;">
                        <i class="fas fa-bus"></i>
                    </div>
                    <h3 class="project-title">Joe Travel</h3>
                    <p class="project-description">Moderni vebsajt autobuske stanice sa ažuriranim redom vožnje, Izgrađen za jednostavno putovanje!</p>
                    <div class="project-tech">
                        <span class="tech-tag">HTML5</span>
                        <span class="tech-tag">CSS3</span>
                        <span class="tech-tag">JavaScript</span>
                        <span class="tech-tag">Responsive</span>
                        <span class="tech-tag">UX/UI</span>
                    </div>
                    <a href="https://ilijxp.github.io/joetravel/#pocetna" class="project-link" target="_blank">
                        <i class="fas fa-external-link-alt"></i> Poseti sajt
                    </a>
                    <div class="project-stats">
                        <span class="project-stat"><i class="fas fa-code"></i> 1k linija</span>
                        <span class="project-stat"><i class="far fa-calendar"></i> Februar 2026</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ABOUT ME WINDOW -->
    <div id="win-about" class="window" style="top: 15%; left: 20%; width: 700px; height: 600px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-about')" ontouchstart="startDragTouch(event, 'win-about')">
            <span data-key="about">O meni</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-about')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-about')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-about')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div id="about-content" class="about-content">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- SOCIALS WINDOW -->
    <div id="win-socials" class="window" style="top: 20%; left: 25%; width: 550px; height: 450px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-socials')" ontouchstart="startDragTouch(event, 'win-socials')">
            <span>Društvene mreže</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-socials')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-socials')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-socials')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div class="socials-container">
                <h3 class="socials-title">Kontaktirajte me</h3>
                <div class="socials-grid">
                    <div class="social-card instagram" onclick="openLink('https://instagram.com/ilijxp')">
                        <div class="social-icon">
                            <i class="fab fa-instagram"></i>
                        </div>
                        <h4 class="social-name">Instagram</h4>
                        <p class="social-value">@ilijxp</p>
                        <button class="social-btn">Zaprati</button>
                    </div>
                    
                    <div class="social-card email" onclick="copyToClipboard('ilijxpdev@gmail.com')">
                        <div class="social-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h4 class="social-name">Email</h4>
                        <p class="social-value">ilijxpdev@gmail.com</p>
                        <button class="social-btn">Kopiraj Email</button>
                    </div>
                    
                    <div class="social-card discord" onclick="openWindow('discord')">
                        <div class="social-icon">
                            <i class="fab fa-discord"></i>
                        </div>
                        <h4 class="social-name">Discord</h4>
                        <p class="social-value">Pridruži se serveru</p>
                        <button class="social-btn">Pridruži se</button>
                    </div>
                    
                    <div class="social-card github" onclick="openLink('https://github.com/ilijxp')">
                        <div class="social-icon">
                            <i class="fab fa-github"></i>
                        </div>
                        <h4 class="social-name">GitHub</h4>
                        <p class="social-value">@ilijxp</p>
                        <button class="social-btn">Vidi Profil</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DISCORD WINDOW -->
    <div id="win-discord" class="window" style="top: 25%; left: 30%; width: 550px; height: 450px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-discord')" ontouchstart="startDragTouch(event, 'win-discord')">
            <span>Discord Server</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-discord')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-discord')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-discord')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div class="discord-container">
                <i class="fab fa-discord discord-icon"></i>
                <h2 class="discord-title">Pridružite se Discord zajednici</h2>
                <p class="discord-subtitle">
                    Povežite se sa drugim developerima, delite projekte, dobijte pomoć i saradite na novim idejama.
                </p>
                
                <button class="discord-invite-btn" onclick="openLink('https://discord.gg/4FKrGDEWjM')">
                    <i class="fab fa-discord"></i> Pridruži se Discordu
                </button>
                
                <div class="discord-stats">
                    <div>
                        <div style="font-size: 22px; color: white;">50+</div>
                        <div>Članova</div>
                    </div>
                    <div>
                        <div style="font-size: 22px; color: white;">3</div>
                        <div>Kanala</div>
                    </div>
                    <div>
                        <div style="font-size: 22px; color: white;">24/7</div>
                        <div>Aktivno</div>
                    </div>
                </div>
                
                <p style="margin-top: 30px; color: #b9bbbe; font-size: 15px;">
                    Kliknite na dugme iznad da se odmah pridružite!
                </p>
            </div>
        </div>
    </div>

    <!-- BROWSER WINDOW -->
    <div id="win-browser" class="window" style="top: 5%; left: 10%; width: 950px; height: 750px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-browser')" ontouchstart="startDragTouch(event, 'win-browser')" oncontextmenu="showContextMenu(event, 'browser'); return false;">
            <span>Pretraživač</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-browser')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-browser')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-browser')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div class="browser-ui">
                <div class="browser-tabs" id="browser-tabs">
                    <div class="browser-tab active" data-tab="newtab" onclick="switchBrowserTab('newtab')">
                        Google
                        <span class="close-tab" onclick="closeBrowserTab('newtab', event)">×</span>
                    </div>
                </div>
                <div class="browser-navbar">
                    <button class="browser-nav-btn" onclick="browserGoBack()" title="Nazad"><i class="fas fa-arrow-left"></i></button>
                    <button class="browser-nav-btn" onclick="browserGoForward()" title="Napred"><i class="fas fa-arrow-right"></i></button>
                    <button class="browser-nav-btn" onclick="browserRefresh()" title="Osveži"><i class="fas fa-redo"></i></button>
                    <input type="text" class="browser-address-bar" id="browser-address" placeholder="Pretraži Google ili unesi URL" value="https://www.google.com" onkeypress="if(event.key==='Enter') browserNavigate()">
                    <button class="browser-nav-btn" onclick="browserNavigate()" title="Idi"><i class="fas fa-search"></i></button>
                </div>
                <div class="bookmarks-bar">
                    <span class="bookmark" onclick="browserQuickNav('https://www.google.com')">Google</span>
                    <span class="bookmark" onclick="browserQuickNav('https://www.youtube.com')">YouTube</span>
                    <span class="bookmark" onclick="browserQuickNav('https://github.com/ilijxp')">GitHub</span>
                    <span class="bookmark" onclick="browserQuickNav('https://www.wikipedia.org')">Wikipedia</span>
                    <span class="bookmark" onclick="browserQuickNav('https://www.reddit.com')">Reddit</span>
                    <span class="bookmark" onclick="browserQuickNav('https://stackoverflow.com')">StackOverflow</span>
                </div>
                <div class="browser-content">
                    <div class="browser-tab-content active" id="browser-tab-newtab">
                        <div class="browser-error">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Browser zabrane</h3>
                            <p>Zbog bezbednosnih ograničenja (CORS politika), ne možemo prikazati spoljne vebsajtove unutar iframe-a.</p>
                            <p>Kliknite na dugme ispod da otvorite sajt u novom tabu:</p>
                            <button onclick="window.open('https://www.google.com', '_blank')" style="padding: 12px 24px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                                <i class="fas fa-external-link-alt"></i> Otvori Google u novom tabu
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAINT WINDOW -->
    <div id="win-paint" class="window" style="top: 5%; left: 5%; width: 750px; height: 600px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-paint')" ontouchstart="startDragTouch(event, 'win-paint')">
            <span>Paint Pro</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-paint')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-paint')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-paint')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div class="paint-container">
                <div class="paint-toolbar">
                    <div class="paint-tool active" onclick="selectPaintTool('brush')" title="Četkica (B)">
                        <i class="fas fa-paint-brush"></i>
                    </div>
                    <div class="paint-tool" onclick="selectPaintTool('line')" title="Linija (L)">
                        <i class="fas fa-slash"></i>
                    </div>
                    <div class="paint-tool" onclick="selectPaintTool('rect')" title="Pravougaonik (R)">
                        <i class="far fa-square"></i>
                    </div>
                    <div class="paint-tool" onclick="selectPaintTool('circle')" title="Krug (C)">
                        <i class="far fa-circle"></i>
                    </div>
                    <div class="paint-tool" onclick="selectPaintTool('text')" title="Tekst (T)">
                        <i class="fas fa-font"></i>
                    </div>
                    <div class="paint-tool" onclick="selectPaintTool('eraser')" title="Gumica (E)">
                        <i class="fas fa-eraser"></i>
                    </div>
                    <div class="paint-tool" onclick="clearAdvancedCanvas()" title="Očisti">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    <div style="margin-left: 10px;">Boja:</div>
                    <div class="paint-colors" id="paint-color-palette">
                        <!-- Boje će biti popunjene JS-om -->
                    </div>
                    <div style="margin-left: auto;">
                        <button onclick="savePaint()" style="padding: 8px 16px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            <i class="fas fa-save"></i> Sačuvaj
                        </button>
                    </div>
                </div>
                <div class="paint-main">
                    <div class="paint-canvas-container">
                        <canvas id="advanced-paint-canvas" width="700" height="450"></canvas>
                    </div>
                </div>
                <div class="paint-status">
                    <span>Alat: <span id="paint-current-tool">Četkica</span></span>
                    <span>Veličina: <input type="range" id="paint-brush-size" min="1" max="50" value="3" onchange="updateBrushSize(this.value)" style="vertical-align: middle;"></span>
                    <span id="paint-coords">X: 0, Y: 0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- NOTEPAD WINDOW -->
    <div id="win-notepad" class="window" style="top: 10%; left: 40%; width: 550px; height: 450px;">
        <div class="title-bar" onmousedown="startDrag(event, 'win-notepad')" ontouchstart="startDragTouch(event, 'win-notepad')">
            <span>Beležnica</span>
            <div class="window-controls">
                <span class="logout-btn" onclick="shutdownOS()" title="Isključi"><i class="fas fa-power-off"></i></span>
                <span class="min-btn" onclick="minWindow('win-notepad')" title="Smanji"><i class="fas fa-window-minimize"></i></span>
                <span class="max-btn" onclick="toggleMaximize('win-notepad')" title="Povećaj"><i class="fas fa-window-maximize"></i></span>
                <span class="close-btn" onclick="closeWindow('win-notepad')" title="Zatvori"><i class="fas fa-times"></i></span>
            </div>
        </div>
        <div class="window-content">
            <div class="notepad-container">
                <div class="notepad-menu-bar">
                    <div class="notepad-menu-item" onclick="createNewTextFile()">
                        <i class="fas fa-file"></i> Novi
                    </div>
                    <div class="notepad-menu-item" onclick="saveTxt()">
                        <i class="fas fa-save"></i> Sačuvaj
                    </div>
                </div>
                <div class="notepad-content">
                    <textarea class="notepad-tab notepad-readonly active" id="notepad-file-1" readonly>
Dobrodošli u Portfolio OS Beležnicu!
Ovo je primer samo-za-čitanje fajla.
Možete napraviti NOVE fajlove da ih uređujete.
Desni klik za više opcija!
                    </textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- START MENU -->
    <div id="start-menu">
        <div class="start-profile">
            <img src="https://ui-avatars.com/api/?name=Portfolio+OS&background=0078d7&color=fff" alt="Korisnik">
            <div>
                <span style="font-weight: bold; font-size: 18px;">Portfolio OS</span><br>
                <span style="font-size: 13px; opacity: 0.9;">v3.0</span>
            </div>
        </div>
        <div class="start-apps">
            <div class="start-item" onclick="openWindow('projects')">
                <i class="fas fa-folder c-folder"></i>
                <span>Projekti</span>
            </div>
            <div class="start-item" onclick="openWindow('about')">
                <i class="fas fa-user c-user"></i>
                <span>O meni</span>
            </div>
            <div class="start-item" onclick="openWindow('browser')">
                <i class="fab fa-chrome c-browser"></i>
                <span>Pretraživač</span>
            </div>
            <div class="start-item" onclick="openWindow('paint')">
                <i class="fas fa-paint-brush c-paint"></i>
                <span>Paint Pro</span>
            </div>
            <div class="start-item" onclick="createNewTextFile()">
                <i class="fas fa-file-alt c-notepad"></i>
                <span>Beležnica</span>
            </div>
            <div class="start-item" onclick="createNewTextFile()">
                <i class="fas fa-plus-circle"></i>
                <span>Novi fajl</span>
            </div>
            <div class="start-item" onclick="openLink('https://github.com/ilijxp')">
                <i class="fab fa-github c-github"></i>
                <span>GitHub</span>
            </div>
            <div class="start-item" onclick="openWindow('discord')">
                <i class="fab fa-discord c-discord"></i>
                <span>Discord</span>
            </div>
            <div class="start-item" onclick="openWindow('socials')">
                <i class="fas fa-share-alt c-social"></i>
                <span>Društvene mreže</span>
            </div>
        </div>
        <div style="padding: 15px; background: rgba(0,0,0,0.05); margin-top: auto; display: flex; gap: 10px;">
            <div class="start-item" onclick="shutdownOS()" style="flex: 1; text-align: center; background: rgba(0,0,0,0.1);">
                <i class="fas fa-power-off" style="color: #ff6b6b;"></i>
                <span>Isključi</span>
            </div>
        </div>
    </div>

    <!-- TASKBAR -->
    <div id="taskbar">
        <div class="start-btn" onclick="toggleStartMenu()">
            <img src="content/logo.png" alt="W" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Windows_logo_-_2012_%28dark_blue%29.svg/1024px-Windows_logo_-_2012_%28dark_blue%29.svg.png'">
        </div>
        
        <div class="taskbar-apps">
            <div class="taskbar-icon" onclick="openWindow('browser')" title="Pretraživač" id="taskbar-browser">
                <i class="fab fa-chrome"></i>
            </div>
            <div class="taskbar-icon" onclick="openWindow('paint')" title="Paint" id="taskbar-paint">
                <i class="fas fa-paint-brush"></i>
            </div>
            <div class="taskbar-icon" onclick="openWindow('discord')" title="Discord" id="taskbar-discord">
                <i class="fab fa-discord"></i>
            </div>
            <div class="taskbar-icon" onclick="openWindow('notepad')" title="Beležnica" id="taskbar-notepad">
                <i class="fas fa-file-alt"></i>
            </div>
            <div class="taskbar-icon" onclick="openWindow('projects')" title="Projekti" id="taskbar-projects">
                <i class="fas fa-folder"></i>
            </div>
        </div>

        <div class="clock-tray" id="clock" onclick="showContextMenu(event, 'clock')">
            12:00<br>1/1/2024
        </div>
    </div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        let highestZ = 10;
        let isDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;
        let currentWindow = null;
        let currentLang = 'sr';
        let textFileCounter = 1;
        let paintHistory = [];
        let isDraggingIcon = false;
        let draggedIcon = null;
        let iconStartX = 0;
        let iconStartY = 0;
        let lastTouchTime = 0;
        let isTouchDevice = 'ontouchstart' in window;
        let isShuttingDown = false;
        let browserTabs = ['newtab'];
        let currentBrowserTab = 'newtab';
        let browserHistory = { newtab: ['https://www.google.com'] };
        let browserHistoryIndex = { newtab: 0 };
        let paintCtx;
        let painting = false;
        let paintTool = 'brush';
        let paintColor = '#000000';
        let brushSize = 3;
        let startX, startY;
        let snapshot;

        // ========== SHUTDOWN SYSTEM ==========
        function shutdownOS() {
            if(isShuttingDown) return;
            
            isShuttingDown = true;
            const shutdownScreen = document.getElementById('shutdown-screen');
            const progressBar = document.getElementById('shutdown-progress');
            
            // Show shutdown screen
            shutdownScreen.style.display = 'flex';
            shutdownScreen.style.zIndex = 20000;
            
            // Animate progress bar
            setTimeout(() => {
                progressBar.style.width = '100%';
            }, 100);
            
            // Shutdown sequence
            setTimeout(() => {
                // Close all windows
                document.querySelectorAll('.window').forEach(win => {
                    win.style.display = 'none';
                });
                
                // Hide taskbar and start menu
                document.getElementById('taskbar').style.display = 'none';
                document.getElementById('start-menu').style.display = 'none';
                
                // Final shutdown message
                document.querySelector('.shutdown-text').textContent = 'Sistem je isključen';
                document.querySelector('.shutdown-subtext').textContent = 'Možete sada bezbjedno ugasiti prozor.';
                document.querySelector('.shutdown-logo').innerHTML = '<i class="fas fa-check-circle"></i>';
                
                // Add restart option
                setTimeout(() => {
                    const restartBtn = document.createElement('button');
                    restartBtn.innerHTML = '<i class="fas fa-redo"></i> Restartuj sistem';
                    restartBtn.style.padding = '15px 30px';
                    restartBtn.style.background = 'linear-gradient(135deg, #0078d7, #005a9e)';
                    restartBtn.style.color = 'white';
                    restartBtn.style.border = 'none';
                    restartBtn.style.borderRadius = '8px';
                    restartBtn.style.fontSize = '18px';
                    restartBtn.style.cursor = 'pointer';
                    restartBtn.style.marginTop = '30px';
                    restartBtn.onclick = () => {
                        location.reload();
                    };
                    
                    shutdownScreen.appendChild(restartBtn);
                }, 1000);
                
            }, 3000);
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ========== LOAD ABOUT ME CONTENT ==========
        function loadAboutContent() {
            const aboutContent = document.getElementById('about-content');
            
            // Show loading state
            aboutContent.innerHTML = `
                <div class="about-loading">
                    <i class="fas fa-spinner"></i>
                    <h3>Učitavam podatke...</h3>
                    <p>Molim sačekajte dok se učitava "o-meni.html" fajl.</p>
                </div>
            `;
            
            // Try to load the o-meni.html file
            fetch('o-meni.html')
                .then(response => {
                    if (response.ok) {
                        return response.text();
                    } else {
                        throw new Error('Fajl nije pronađen');
                    }
                })
                .then(html => {
                    // Success - display the loaded HTML
                    aboutContent.innerHTML = html;
                    showNotification('Fajl "o-meni.html" je uspješno učitan!');
                })
                .catch(error => {
                    // File not found or error loading
                    aboutContent.innerHTML = `
                        <div class="about-error">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Fajl nije pronađen</h3>
                            <p>Fajl "o-meni.html" nije pronađen u direktorijumu.</p>
                            <p style="margin-top: 30px; font-size: 24px; color: #333; font-weight: bold;">
                                Trenutno u izradi!
                            </p>
                            <p style="margin-top: 20px; color: #666;">
                                Ova sekcija će biti dostupna uskoro kada fajl bude dodat.
                            </p>
                            <div style="margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
                                <button onclick="openLink('https://github.com/ilijxp')" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer;">
                                    <i class="fab fa-github"></i> GitHub
                                </button>
                                <button onclick="openWindow('socials')" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                    <i class="fas fa-share-alt"></i> Društvene mreže
                                </button>
                            </div>
                        </div>
                    `;
                    console.log('Greška pri učitavanju o-meni.html:', error);
                });
        }

        // ========== WINDOW MANAGEMENT ==========
        function openWindow(appId) {
            const win = document.getElementById('win-' + appId);
            if(win) {
                win.style.display = 'flex';
                win.style.zIndex = ++highestZ;
                document.getElementById('start-menu').style.display = 'none';
                
                // Update taskbar icon state
                const taskbarIcon = document.getElementById('taskbar-' + appId);
                if(taskbarIcon) {
                    taskbarIcon.classList.add('active');
                }
                
                // Special initialization for certain apps
                if(appId === 'paint') initPaint();
                if(appId === 'browser') initBrowser();
                if(appId === 'about') loadAboutContent();
            }
        }

        function closeWindow(appId) {
            const win = document.getElementById(appId);
            if(win) {
                win.style.display = 'none';
                
                // Update taskbar icon state
                const appName = appId.replace('win-', '');
                const taskbarIcon = document.getElementById('taskbar-' + appName);
                if(taskbarIcon) {
                    taskbarIcon.classList.remove('active');
                }
            }
        }

        function minWindow(appId) {
            const win = document.getElementById(appId);
            win.style.display = 'none';
            
            // Update taskbar icon state
            const appName = appId.replace('win-', '');
            const taskbarIcon = document.getElementById('taskbar-' + appName);
            if(taskbarIcon) {
                taskbarIcon.classList.remove('active');
            }
        }

        function toggleMaximize(winId) {
            const win = document.getElementById(winId);
            if (win.classList.contains('maximized')) {
                win.classList.remove('maximized');
                win.style.width = win.dataset.prevWidth || '750px';
                win.style.height = win.dataset.prevHeight || '600px';
                win.style.top = win.dataset.prevTop || '10%';
                win.style.left = win.dataset.prevLeft || '15%';
            } else {
                win.dataset.prevWidth = win.style.width;
                win.dataset.prevHeight = win.style.height;
                win.dataset.prevTop = win.style.top;
                win.dataset.prevLeft = win.style.left;
                
                win.classList.add('maximized');
            }
        }

        // ========== WINDOW DRAGGING ==========
        function startDrag(e, winId) {
            e.preventDefault();
            isDragging = true;
            currentWindow = document.getElementById(winId);
            
            // Remove maximized state if dragging
            if (currentWindow.classList.contains('maximized')) {
                currentWindow.classList.remove('maximized');
                // Restore previous position and size
                currentWindow.style.width = currentWindow.dataset.prevWidth || '750px';
                currentWindow.style.height = currentWindow.dataset.prevHeight || '600px';
                currentWindow.style.top = currentWindow.dataset.prevTop || '10%';
                currentWindow.style.left = currentWindow.dataset.prevLeft || '15%';
            }
            
            const rect = currentWindow.getBoundingClientRect();
            dragOffsetX = e.clientX - rect.left;
            dragOffsetY = e.clientY - rect.top;
            
            currentWindow.style.zIndex = ++highestZ;

            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        }

        function startDragTouch(e, winId) {
            e.preventDefault();
            isDragging = true;
            currentWindow = document.getElementById(winId);
            
            // Remove maximized state if dragging
            if (currentWindow.classList.contains('maximized')) {
                currentWindow.classList.remove('maximized');
                // Restore previous position and size
                currentWindow.style.width = currentWindow.dataset.prevWidth || '750px';
                currentWindow.style.height = currentWindow.dataset.prevHeight || '600px';
                currentWindow.style.top = currentWindow.dataset.prevTop || '10%';
                currentWindow.style.left = currentWindow.dataset.prevLeft || '15%';
            }
            
            const rect = currentWindow.getBoundingClientRect();
            dragOffsetX = e.touches[0].clientX - rect.left;
            dragOffsetY = e.touches[0].clientY - rect.top;
            
            currentWindow.style.zIndex = ++highestZ;

            document.addEventListener('touchmove', onTouchMove, {passive: false});
            document.addEventListener('touchend', onTouchEnd);
        }

        function onMouseMove(e) {
            if (!isDragging || !currentWindow) return;
            
            let x = e.clientX - dragOffsetX;
            let y = e.clientY - dragOffsetY;
            
            // Keep within bounds
            const maxX = window.innerWidth - currentWindow.offsetWidth;
            const maxY = window.innerHeight - currentWindow.offsetHeight;
            x = Math.max(0, Math.min(x, maxX));
            y = Math.max(0, Math.min(y, maxY));
            
            currentWindow.style.left = x + 'px';
            currentWindow.style.top = y + 'px';
        }

        function onTouchMove(e) {
            if (!isDragging || !currentWindow || e.touches.length !== 1) return;
            
            let x = e.touches[0].clientX - dragOffsetX;
            let y = e.touches[0].clientY - dragOffsetY;
            
            // Keep within bounds
            const maxX = window.innerWidth - currentWindow.offsetWidth;
            const maxY = window.innerHeight - currentWindow.offsetHeight;
            x = Math.max(0, Math.min(x, maxX));
            y = Math.max(0, Math.min(y, maxY));
            
            currentWindow.style.left = x + 'px';
            currentWindow.style.top = y + 'px';
            
            e.preventDefault();
        }

        function onMouseUp() {
            isDragging = false;
            currentWindow = null;
            document.removeEventListener('mousemove', onMouseMove);
            document.removeEventListener('mouseup', onMouseUp);
        }

        function onTouchEnd() {
            isDragging = false;
            currentWindow = null;
            document.removeEventListener('touchmove', onTouchMove);
            document.removeEventListener('touchend', onTouchEnd);
        }

        // ========== ICON DRAGGING ==========
        function initIconDragging() {
            const icons = document.querySelectorAll('.app-icon');
            
            icons.forEach(icon => {
                // Mouse events
                icon.addEventListener('mousedown', startIconDrag);
                icon.addEventListener('touchstart', startIconDragTouch, {passive: false});
                
                // Double click for opening
                icon.addEventListener('dblclick', function() {
                    const appId = this.id.replace('icon-', '');
                    if (appId === 'notepad') {
                        createNewTextFile();
                    } else if (appId === 'github') {
                        openLink('https://github.com/ilijxp');
                    } else {
                        openWindow(appId);
                    }
                });
            });
            
            document.addEventListener('mousemove', dragIcon);
            document.addEventListener('touchmove', dragIconTouch, {passive: false});
            document.addEventListener('mouseup', stopIconDrag);
            document.addEventListener('touchend', stopIconDrag);
        }

        function startIconDrag(e) {
            isDraggingIcon = true;
            draggedIcon = e.currentTarget;
            draggedIcon.classList.add('dragging');
            
            const rect = draggedIcon.getBoundingClientRect();
            iconStartX = e.clientX - rect.left;
            iconStartY = e.clientY - rect.top;
            
            e.preventDefault();
        }

        function startIconDragTouch(e) {
            const now = new Date().getTime();
            const timeSinceLastTouch = now - lastTouchTime;
            
            // Double tap detection (for right click on mobile)
            if (timeSinceLastTouch < 300 && timeSinceLastTouch > 0) {
                // Double tap detected - show context menu
                e.preventDefault();
                showContextMenu(e.touches[0], 'icon');
                lastTouchTime = 0;
                return;
            }
            
            lastTouchTime = now;
            
            isDraggingIcon = true;
            draggedIcon = e.currentTarget;
            draggedIcon.classList.add('dragging');
            
            const rect = draggedIcon.getBoundingClientRect();
            iconStartX = e.touches[0].clientX - rect.left;
            iconStartY = e.touches[0].clientY - rect.top;
            
            e.preventDefault();
        }

        function dragIcon(e) {
            if (!isDraggingIcon || !draggedIcon) return;
            
            const desktop = document.getElementById('desktop');
            const desktopRect = desktop.getBoundingClientRect();
            
            let x = e.clientX - desktopRect.left - iconStartX;
            let y = e.clientY - desktopRect.top - iconStartY;
            
            // Keep within desktop bounds
            const maxX = desktopRect.width - draggedIcon.offsetWidth;
            const maxY = desktopRect.height - draggedIcon.offsetHeight;
            x = Math.max(0, Math.min(x, maxX));
            y = Math.max(0, Math.min(y, maxY));
            
            draggedIcon.style.position = 'absolute';
            draggedIcon.style.left = x + 'px';
            draggedIcon.style.top = y + 'px';
            
            e.preventDefault();
        }

        function dragIconTouch(e) {
            if (!isDraggingIcon || !draggedIcon || e.touches.length !== 1) return;
            
            const desktop = document.getElementById('desktop');
            const desktopRect = desktop.getBoundingClientRect();
            
            let x = e.touches[0].clientX - desktopRect.left - iconStartX;
            let y = e.touches[0].clientY - desktopRect.top - iconStartY;
            
            // Keep within desktop bounds
            const maxX = desktopRect.width - draggedIcon.offsetWidth;
            const maxY = desktopRect.height - draggedIcon.offsetHeight;
            x = Math.max(0, Math.min(x, maxX));
            y = Math.max(0, Math.min(y, maxY));
            
            draggedIcon.style.position = 'absolute';
            draggedIcon.style.left = x + 'px';
            draggedIcon.style.top = y + 'px';
            
            e.preventDefault();
        }

        function stopIconDrag() {
            if (!isDraggingIcon || !draggedIcon) return;
            
            isDraggingIcon = false;
            draggedIcon.classList.remove('dragging');
            draggedIcon = null;
        }

        // ========== START MENU ==========
        function toggleStartMenu() {
            const menu = document.getElementById('start-menu');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
            menu.style.zIndex = ++highestZ;
        }

        document.getElementById('desktop').addEventListener('click', (e) => {
            if(e.target === document.getElementById('desktop')) {
                document.getElementById('start-menu').style.display = 'none';
            }
        });

        document.querySelectorAll('.window').forEach(win => {
            win.addEventListener('mousedown', () => {
                win.style.zIndex = ++highestZ;
            });
        });

        // ========== CONTEXT MENU SYSTEM ==========
        function showContextMenu(e, context) {
            e.preventDefault();
            const menu = document.getElementById('context-menu');
            menu.innerHTML = '';
            
            // Common items
            const refreshItem = document.createElement('div');
            refreshItem.className = 'context-item';
            refreshItem.innerHTML = '<i class="fas fa-redo"></i> Osveži';
            refreshItem.onclick = () => {
                if(context === 'desktop') location.reload();
                if(context === 'browser') browserRefresh();
                hideContextMenu();
            };
            menu.appendChild(refreshItem);
            
            if(context === 'desktop') {
                const newFileItem = document.createElement('div');
                newFileItem.className = 'context-item';
                newFileItem.innerHTML = '<i class="fas fa-file-alt"></i> Novi tekst fajl';
                newFileItem.onclick = () => { createNewTextFile(); hideContextMenu(); };
                menu.appendChild(newFileItem);
                
                const separator = document.createElement('div');
                separator.className = 'context-divider';
                menu.appendChild(separator);
                
                const viewItem = document.createElement('div');
                viewItem.className = 'context-item';
                viewItem.innerHTML = '<i class="fas fa-th-large"></i> Prikaz';
                menu.appendChild(viewItem);
                
                const sortItem = document.createElement('div');
                sortItem.className = 'context-item';
                sortItem.innerHTML = '<i class="fas fa-sort-alpha-down"></i> Sortiraj po';
                menu.appendChild(sortItem);
            }
            
            if(context === 'browser') {
                const newTabItem = document.createElement('div');
                newTabItem.className = 'context-item';
                newTabItem.innerHTML = '<i class="fas fa-plus"></i> Novi tab';
                newTabItem.onclick = () => { addBrowserTab(); hideContextMenu(); };
                menu.appendChild(newTabItem);
            }
            
            if(context === 'icon') {
                const openItem = document.createElement('div');
                openItem.className = 'context-item';
                openItem.innerHTML = '<i class="fas fa-folder-open"></i> Otvori';
                openItem.onclick = () => { 
                    const appId = draggedIcon ? draggedIcon.id.replace('icon-', '') : '';
                    if (appId) {
                        if (appId === 'notepad') createNewTextFile();
                        else if (appId === 'github') openLink('https://github.com/ilijxp');
                        else openWindow(appId);
                    }
                    hideContextMenu(); 
                };
                menu.appendChild(openItem);
                
                const renameItem = document.createElement('div');
                renameItem.className = 'context-item';
                renameItem.innerHTML = '<i class="fas fa-i-cursor"></i> Preimenuj';
                menu.appendChild(renameItem);
                
                const separator = document.createElement('div');
                separator.className = 'context-divider';
                menu.appendChild(separator);
                
                const deleteItem = document.createElement('div');
                deleteItem.className = 'context-item';
                deleteItem.innerHTML = '<i class="fas fa-trash"></i> Obriši';
                deleteItem.onclick = () => { 
                    showNotification('Obrisano (simulacija)'); 
                    hideContextMenu(); 
                };
                menu.appendChild(deleteItem);
            }
            
            if(context === 'clock') {
                const dateItem = document.createElement('div');
                dateItem.className = 'context-item';
                dateItem.innerHTML = `<i class="far fa-calendar"></i> ${new Date().toLocaleDateString('sr-RS')}`;
                menu.appendChild(dateItem);
                
                const timeItem = document.createElement('div');
                timeItem.className = 'context-item';
                timeItem.innerHTML = `<i class="far fa-clock"></i> ${new Date().toLocaleTimeString('sr-RS', {hour: '2-digit', minute:'2-digit'})}`;
                menu.appendChild(timeItem);
            }
            
            menu.style.left = (e.pageX || e.touches[0].pageX) + 'px';
            menu.style.top = (e.pageY || e.touches[0].pageY) + 'px';
            menu.style.display = 'flex';
            menu.style.zIndex = 10001;
        }

        function hideContextMenu() {
            document.getElementById('context-menu').style.display = 'none';
        }

        document.addEventListener('click', hideContextMenu);
        document.addEventListener('touchstart', hideContextMenu, {passive: false});

        // ========== UTILITY FUNCTIONS ==========
        function openLink(url) {
            window.open(url, '_blank');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Kopirano u clipboard: ' + text);
            }).catch(err => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Kopirano u clipboard: ' + text);
            });
        }

        function createNewTextFile() {
            textFileCounter++;
            const notepadContent = document.querySelector('.notepad-content');
            
            // Create new textarea
            const newTextarea = document.createElement('textarea');
            newTextarea.className = 'notepad-tab active';
            newTextarea.id = `notepad-file-${textFileCounter}`;
            newTextarea.placeholder = 'Kucajte ovde... Možete uređivati ovaj novi fajl!';
            
            // Hide other tabs
            document.querySelectorAll('.notepad-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            notepadContent.appendChild(newTextarea);
            
            // Update window title
            const notepadTitle = document.querySelector('#win-notepad .title-bar span');
            notepadTitle.textContent = `Beležnica - Novi fajl ${textFileCounter}`;
            
            // Open notepad window
            openWindow('notepad');
            
            // Focus the new textarea
            setTimeout(() => newTextarea.focus(), 100);
        }

        function saveTxt() {
            const activeTextarea = document.querySelector('.notepad-tab.active');
            if(!activeTextarea) return;
            
            const text = activeTextarea.value;
            const blob = new Blob([text], { type: "text/plain"});
            const anchor = document.createElement("a");
            anchor.href = URL.createObjectURL(blob);
            anchor.download = "beleška.txt";
            anchor.click();
        }

        // ========== BROWSER FUNCTIONS ==========
        function initBrowser() {
            // Initialize color palette for paint if needed
            if(!document.getElementById('paint-color-palette').innerHTML) {
                initPaintColors();
            }
            
            // Load default tab
            switchBrowserTab('newtab');
        }

        function addBrowserTab() {
            const tabId = 'tab' + Date.now();
            browserTabs.push(tabId);
            browserHistory[tabId] = ['https://www.google.com'];
            browserHistoryIndex[tabId] = 0;
            
            // Create tab element
            const tabElement = document.createElement('div');
            tabElement.className = 'browser-tab';
            tabElement.dataset.tab = tabId;
            tabElement.innerHTML = `Novi tab <span class="close-tab" onclick="closeBrowserTab('${tabId}', event)">×</span>`;
            tabElement.onclick = () => switchBrowserTab(tabId);
            
            document.getElementById('browser-tabs').appendChild(tabElement);
            
            // Create content area
            const contentElement = document.createElement('div');
            contentElement.className = 'browser-tab-content';
            contentElement.id = `browser-tab-${tabId}`;
            contentElement.innerHTML = `<div class="browser-error">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Browser zabrane</h3>
                <p>Zbog bezbednosnih ograničenja (CORS politika), ne možemo prikazati spoljne vebsajtove.</p>
                <button onclick="window.open('https://www.google.com', '_blank')" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 15px;">
                    <i class="fas fa-external-link-alt"></i> Otvori Google u novom tabu
                </button>
            </div>`;
            
            document.querySelector('.browser-content').appendChild(contentElement);
            
            // Switch to new tab
            switchBrowserTab(tabId);
        }

        function switchBrowserTab(tabId) {
            // Update tab UI
            document.querySelectorAll('.browser-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.browser-tab[data-tab="${tabId}"]`).classList.add('active');
            
            // Update content UI
            document.querySelectorAll('.browser-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`browser-tab-${tabId}`).classList.add('active');
            
            currentBrowserTab = tabId;
            
            // Update address bar
            if(browserHistory[tabId] && browserHistory[tabId].length > 0) {
                const currentUrl = browserHistory[tabId][browserHistoryIndex[tabId]];
                if(currentUrl) {
                    document.getElementById('browser-address').value = currentUrl;
                }
            }
        }

        function closeBrowserTab(tabId, event) {
            if(event) event.stopPropagation();
            
            if(browserTabs.length <= 1) return; // Don't close the last tab
            
            // Remove tab
            browserTabs = browserTabs.filter(id => id !== tabId);
            document.querySelector(`.browser-tab[data-tab="${tabId}"]`).remove();
            document.getElementById(`browser-tab-${tabId}`).remove();
            
            // Switch to another tab
            switchBrowserTab(browserTabs[0]);
            
            // Cleanup
            delete browserHistory[tabId];
            delete browserHistoryIndex[tabId];
        }

        function browserNavigate() {
            let url = document.getElementById('browser-address').value;
            
            // Add https:// if not present
            if(!url.startsWith('http://') && !url.startsWith('https://')) {
                if(url.includes('.')) {
                    url = 'https://' + url;
                } else {
                    url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
                }
            }
            
            // Add to history
            if(!browserHistory[currentBrowserTab]) {
                browserHistory[currentBrowserTab] = [];
                browserHistoryIndex[currentBrowserTab] = -1;
            }
            
            browserHistory[currentBrowserTab].push(url);
            browserHistoryIndex[currentBrowserTab] = browserHistory[currentBrowserTab].length - 1;
            
            // Show error message about CORS instead of trying to load iframe
            const contentDiv = document.getElementById(`browser-tab-${currentBrowserTab}`);
            contentDiv.innerHTML = `
                <div class="browser-error">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Ne može se učitati sajt</h3>
                    <p>URL: ${url}</p>
                    <p>Zbog bezbednosnih ograničenja (CORS politika), ne možemo prikazati ovaj sajt unutar iframe-a.</p>
                    <button onclick="window.open('${url}', '_blank')" style="padding: 12px 24px; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; margin-top: 20px;">
                        <i class="fas fa-external-link-alt"></i> Otvori u novom tabu
                    </button>
                </div>
            `;
            
            // Update tab title
            const tabElement = document.querySelector(`.browser-tab[data-tab="${currentBrowserTab}"]`);
            try {
                const domain = new URL(url).hostname.replace('www.', '');
                tabElement.textContent = domain.substring(0, 15) + (domain.length > 15 ? '...' : '');
                tabElement.innerHTML += `<span class="close-tab" onclick="closeBrowserTab('${currentBrowserTab}', event)">×</span>`;
            } catch(e) {
                tabElement.textContent = 'Učitavanje...';
                tabElement.innerHTML += `<span class="close-tab" onclick="closeBrowserTab('${currentBrowserTab}', event)">×</span>`;
            }
        }

        function browserQuickNav(url) {
            document.getElementById('browser-address').value = url;
            browserNavigate();
        }

        function browserGoBack() {
            if(browserHistoryIndex[currentBrowserTab] > 0) {
                browserHistoryIndex[currentBrowserTab]--;
                const url = browserHistory[currentBrowserTab][browserHistoryIndex[currentBrowserTab]];
                document.getElementById('browser-address').value = url;
                browserNavigate();
            }
        }

        function browserGoForward() {
            if(browserHistoryIndex[currentBrowserTab] < browserHistory[currentBrowserTab].length - 1) {
                browserHistoryIndex[currentBrowserTab]++;
                const url = browserHistory[currentBrowserTab][browserHistoryIndex[currentBrowserTab]];
                document.getElementById('browser-address').value = url;
                browserNavigate();
            }
        }

        function browserRefresh() {
            const currentUrl = document.getElementById('browser-address').value;
            if (currentUrl) {
                browserNavigate();
            }
        }

        // ========== PAINT FUNCTIONS ==========
        function initPaint() {
            const canvas = document.getElementById('advanced-paint-canvas');
            paintCtx = canvas.getContext('2d');
            
            // Set initial styles
            paintCtx.lineWidth = brushSize;
            paintCtx.lineCap = 'round';
            paintCtx.lineJoin = 'round';
            
            // Initialize color palette
            if(!document.getElementById('paint-color-palette').innerHTML) {
                initPaintColors();
            }
            
            // Event listeners for mouse
            canvas.addEventListener('mousedown', startPaint);
            canvas.addEventListener('mousemove', paintDraw);
            canvas.addEventListener('mouseup', stopPaint);
            canvas.addEventListener('mouseout', stopPaint);
            
            // Event listeners for touch
            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const mouseEvent = new MouseEvent('mousedown', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }, {passive: false});
            
            canvas.addEventListener('touchmove', function(e) {
                e.preventDefault();
                if (e.touches.length !== 1) return;
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }, {passive: false});
            
            canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                const mouseEvent = new MouseEvent('mouseup');
                canvas.dispatchEvent(mouseEvent);
            }, {passive: false});
            
            // Update coordinates display
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const x = Math.round(e.clientX - rect.left);
                const y = Math.round(e.clientY - rect.top);
                document.getElementById('paint-coords').textContent = `X: ${x}, Y: ${y}`;
            });
        }

        function initPaintColors() {
            const colors = [
                '#000000', '#FFFFFF', '#FF0000', '#00FF00', '#0000FF',
                '#FFFF00', '#FF00FF', '#00FFFF', '#FF6B6B', '#4ECDC4',
                '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8',
                '#F7DC6F', '#BB8FCE', '#85C1E9', '#F8C471', '#82E0AA'
            ];
            
            const palette = document.getElementById('paint-color-palette');
            palette.innerHTML = '';
            
            colors.forEach(color => {
                const colorDiv = document.createElement('div');
                colorDiv.className = 'paint-color';
                colorDiv.style.backgroundColor = color;
                colorDiv.dataset.color = color;
                colorDiv.onclick = () => selectPaintColor(color);
                if(color === '#000000') colorDiv.classList.add('active');
                palette.appendChild(colorDiv);
            });
        }

        function selectPaintTool(tool) {
            paintTool = tool;
            document.getElementById('paint-current-tool').textContent = 
                tool === 'brush' ? 'Četkica' :
                tool === 'line' ? 'Linija' :
                tool === 'rect' ? 'Pravougaonik' :
                tool === 'circle' ? 'Krug' :
                tool === 'text' ? 'Tekst' :
                tool === 'eraser' ? 'Gumica' : tool;
            
            // Update UI
            document.querySelectorAll('.paint-tool').forEach(el => {
                el.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function selectPaintColor(color) {
            paintColor = color;
            document.querySelectorAll('.paint-color').forEach(el => {
                el.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function updateBrushSize(size) {
            brushSize = parseInt(size);
            paintCtx.lineWidth = brushSize;
        }

        function startPaint(e) {
            painting = true;
            const canvas = document.getElementById('advanced-paint-canvas');
            const rect = canvas.getBoundingClientRect();
            startX = e.clientX - rect.left;
            startY = e.clientY - rect.top;
            
            // Save snapshot for some tools
            if(paintTool !== 'brush' && paintTool !== 'eraser') {
                snapshot = paintCtx.getImageData(0, 0, canvas.width, canvas.height);
            }
            
            paintCtx.beginPath();
            paintCtx.moveTo(startX, startY);
            
            // For brush and eraser, start drawing immediately
            if(paintTool === 'brush' || paintTool === 'eraser') {
                paintDraw(e);
            }
        }

        function paintDraw(e) {
            if(!painting) return;
            
            const canvas = document.getElementById('advanced-paint-canvas');
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            paintCtx.strokeStyle = paintTool === 'eraser' ? '#FFFFFF' : paintColor;
            
            if(paintTool === 'brush' || paintTool === 'eraser') {
                paintCtx.lineTo(x, y);
                paintCtx.stroke();
            } else {
                // Restore snapshot for shape tools
                paintCtx.putImageData(snapshot, 0, 0);
                
                if(paintTool === 'line') {
                    paintCtx.beginPath();
                    paintCtx.moveTo(startX, startY);
                    paintCtx.lineTo(x, y);
                    paintCtx.stroke();
                } else if(paintTool === 'rect') {
                    const width = x - startX;
                    const height = y - startY;
                    paintCtx.strokeRect(startX, startY, width, height);
                } else if(paintTool === 'circle') {
                    const radius = Math.sqrt(Math.pow(x - startX, 2) + Math.pow(y - startY, 2));
                    paintCtx.beginPath();
                    paintCtx.arc(startX, startY, radius, 0, 2 * Math.PI);
                    paintCtx.stroke();
                } else if(paintTool === 'text') {
                    const text = prompt('Unesite tekst:', 'Zdravo');
                    if(text) {
                        paintCtx.font = `${brushSize * 5}px Arial`;
                        paintCtx.fillStyle = paintColor;
                        paintCtx.fillText(text, startX, startY);
                    }
                }
            }
        }

        function stopPaint() {
            painting = false;
            paintCtx.beginPath();
            
            // Save to history for undo
            const canvas = document.getElementById('advanced-paint-canvas');
            paintHistory.push(paintCtx.getImageData(0, 0, canvas.width, canvas.height));
            if(paintHistory.length > 20) paintHistory.shift(); // Limit history
        }

        function clearAdvancedCanvas() {
            const canvas = document.getElementById('advanced-paint-canvas');
            paintCtx.clearRect(0, 0, canvas.width, canvas.height);
            paintHistory = [];
        }

        function savePaint() {
            const canvas = document.getElementById('advanced-paint-canvas');
            const link = document.createElement('a');
            link.download = 'moj-crtez.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // ========== TOUCH EVENTS FOR MOBILE ==========
        function initTouchEvents() {
            // Prevent zoom on double tap
            document.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, {passive: false});
            
            // Prevent context menu on long press
            document.addEventListener('contextmenu', function(e) {
                if (isTouchDevice) {
                    e.preventDefault();
                }
            });
        }

        // ========== CLOCK ==========
        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString('sr-RS', {hour: '2-digit', minute:'2-digit'});
            const date = now.toLocaleDateString('sr-RS');
            document.getElementById('clock').innerHTML = 
                `${time}<br>${date}`;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize icon dragging
            initIconDragging();
            
            // Initialize paint colors if needed
            if(document.getElementById('paint-color-palette')) {
                initPaintColors();
            }
            
            // Show welcome notification
            setTimeout(() => {
                showNotification('Dobrodošli u Portfolio OS!');
            }, 1000);
            
            // Check if touch device
            if (isTouchDevice) {
                document.body.classList.add('touch-device');
                initTouchEvents();
            }
        });

        console.log('Portfolio OS Pro v3.0 učitan uspešno!');
    </script>
</body>
</html>